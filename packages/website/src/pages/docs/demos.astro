---
import Layout from '../../layouts/Layout.astro';
import Section from '../../components/Section.astro';
import SectionHeader from '../../components/SectionHeader.astro';
import Panel from '../../components/Panel.astro';
import Chip from '../../components/Chip.astro';

const base = import.meta.env.BASE_URL.endsWith('/')
  ? import.meta.env.BASE_URL
  : `${import.meta.env.BASE_URL}/`;
---

<Layout title="Demos - Motus">
  <Section tone="dark" pad="hero" class="text-center" innerClass="max-w-3xl">
    <SectionHeader
      eyebrow="Demos"
      title="See the verified loop in action"
      subtitle="These commands reflect v0.1.0 output. No placeholders."
      size="xl"
    />
    <div class="mt-phi-3 flex flex-wrap justify-center gap-phi-2 text-sm">
      <a href={`${base}get-started`} class="text-mint hover:text-text-primary transition-colors">
        Get Started &#8594;
      </a>
      <a href={`${base}how-it-works`} class="text-mint hover:text-text-primary transition-colors">
        How it works &#8594;
      </a>
    </div>
  </Section>

  <Section tone="light" pad="tight" innerClass="max-w-5xl">
    <SectionHeader
      eyebrow="Current"
      title="Verified loop (6 calls)"
      subtitle="Claim, context, outcome, evidence, decision, release."
      align="left"
      size="md"
      class="mb-phi-4"
      maxWidth="max-w-3xl"
    />
    <Panel size="sm" class="space-y-phi-2">
      <div class="flex flex-wrap items-center gap-phi-2">
        <Chip>Current</Chip>
        <span class="text-xs uppercase tracking-[0.2em] text-text-secondary">CLI</span>
      </div>
      <div class="space-y-phi-1">
        <code class="text-mint font-mono text-sm block">motus work claim TASK-042 --intent &quot;Fix authentication bug&quot;</code>
        <code class="text-mint font-mono text-sm block">motus work context &lt;lease_id&gt;</code>
        <code class="text-mint font-mono text-sm block">motus work outcome &lt;lease_id&gt; file --path src/auth.py --description &quot;Patch&quot;</code>
        <code class="text-mint font-mono text-sm block">motus work evidence &lt;lease_id&gt; test_result --passed 12 --failed 0</code>
        <code class="text-mint font-mono text-sm block">motus work decision &lt;lease_id&gt; &quot;Used retry logic&quot; --rationale &quot;Transient failures&quot;</code>
        <code class="text-mint font-mono text-sm block">motus work release &lt;lease_id&gt; success</code>
        <code class="text-mint font-mono text-sm block">motus work status &lt;lease_id&gt;</code>
      </div>
      <p class="text-sm text-text-secondary">
        Expected: lease granted, context assembled, evidence + decision recorded, release success, status shows the receipt.
      </p>
    </Panel>
  </Section>

  <Section tone="light" pad="tight" innerClass="max-w-5xl">
    <SectionHeader
      eyebrow="Current"
      title="Multi-agent conflict prevention"
      subtitle="Leases prevent two agents from claiming the same task."
      align="left"
      size="md"
      class="mb-phi-4"
      maxWidth="max-w-3xl"
    />
    <Panel size="sm" class="space-y-phi-2">
      <div class="flex flex-wrap items-center gap-phi-2">
        <Chip>Current</Chip>
        <span class="text-xs uppercase tracking-[0.2em] text-text-secondary">CLI</span>
      </div>
      <div class="space-y-phi-1">
        <code class="text-mint font-mono text-sm block">MC_AGENT_ID=agent-a motus work claim TASK-100 --intent &quot;Refactor database&quot;</code>
        <code class="text-mint font-mono text-sm block">MC_AGENT_ID=agent-b motus work claim TASK-100 --intent &quot;Also refactor&quot;</code>
      </div>
      <p class="text-sm text-text-secondary">
        Expected: Agent B is denied with the current holder and lease details.
      </p>
    </Panel>
  </Section>

  <Section tone="light" pad="tight" innerClass="max-w-5xl">
    <SectionHeader
      eyebrow="Future"
      title="Strict enforcement demos"
      subtitle="These scenarios require gates that are not enforced in v0.1.0."
      align="left"
      size="md"
      class="mb-phi-4"
      maxWidth="max-w-3xl"
    />
    <Panel size="sm" class="space-y-phi-2">
      <div class="flex flex-wrap items-center gap-phi-2">
        <Chip>Future</Chip>
        <span class="text-xs uppercase tracking-[0.2em] text-text-secondary">Planned</span>
      </div>
      <ul class="text-sm text-text-secondary space-y-phi-1">
        <li>Fail-closed release when evidence or decision is missing.</li>
        <li>Receipt hash verification (proof-of-work audit).</li>
        <li>Gate configuration from policy files.</li>
        <li>Context transfer between agents on handoff.</li>
      </ul>
      <p class="text-sm text-text-secondary">
        These require enforcement gates. Track progress in the roadmap and evidence registry.
      </p>
    </Panel>
  </Section>
</Layout>
