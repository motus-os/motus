---
import Layout from '../layouts/Layout.astro';
import Section from '../components/Section.astro';
import Panel from '../components/Panel.astro';
import InstallCommand from '../components/InstallCommand.astro';
import SectionHeader from '../components/SectionHeader.astro';
import Button from '../components/Button.astro';
import messaging from '../data/messaging.json';

const base = import.meta.env.BASE_URL.endsWith('/')
  ? import.meta.env.BASE_URL
  : `${import.meta.env.BASE_URL}/`;

const hero = messaging.hero || {};
const heroHeadline = hero.headline || 'What did your agent actually do?';
const heroSubheadline = hero.subheadline || 'Motus knows.';
const heroValueProp = hero.value_prop || 'Every action logged. Every decision recorded. Every outcome, receipted.';
const heroCtaText = hero.cta_text || 'Get your first receipt';
const heroCtaPath = hero.cta_url ? hero.cta_url.replace(/^\/+/, '') : 'get-started';
const heroCtaHref = `${base}${heroCtaPath}`;
---

<Layout title="Motus - What did your agent actually do?">
  <!-- HERO: The Question -->
  <Section tone="dark" pad="hero" class="text-center" innerClass="max-w-5xl">
    <h1 class="text-3xl md:text-5xl lg:text-6xl font-display text-text-secondary mb-phi-2">
      What did your agent <span class="whitespace-nowrap">actually do?</span>
    </h1>
    <p class="text-4xl md:text-6xl lg:text-7xl font-display text-mint mb-phi-4">
      {heroSubheadline}
    </p>

    <p class="text-lg md:text-xl text-text-secondary mb-phi-3 max-w-2xl mx-auto">
      {heroValueProp}
    </p>

    <div class="flex flex-col sm:flex-row gap-phi-3 justify-center items-center mb-phi-4">
      <InstallCommand />
      <Button href={heroCtaHref} variant="secondary">
        {heroCtaText} &#8594;
      </Button>
    </div>

    <p class="text-sm text-text-secondary/60">
      Works with Claude, GPT, Gemini, LangChain, n8n, and local agents.
    </p>
  </Section>

  <!-- VISION 1: The Transaction (Micro) -->
  <Section tone="light" pad="tight" class="border-t border-line/30" innerClass="max-w-4xl">
    <p class="text-xs uppercase tracking-[0.2em] text-mint mb-phi-2">Today</p>
    <h2 class="text-2xl md:text-3xl font-display text-text-primary mb-phi-4">
      One task. One receipt.
    </h2>

    <div class="grid md:grid-cols-3 gap-phi-4 text-center">
      <div>
        <p class="text-lg font-display text-mint mb-phi-1">Outcome</p>
        <p class="text-sm text-text-secondary">What was delivered.</p>
      </div>
      <div>
        <p class="text-lg font-display text-mint mb-phi-1">Evidence</p>
        <p class="text-sm text-text-secondary">Proof it worked.</p>
      </div>
      <div>
        <p class="text-lg font-display text-mint mb-phi-1">Decisions</p>
        <p class="text-sm text-text-secondary">Why it was done.</p>
      </div>
    </div>
  </Section>

  <!-- VISION 2: The Chain (Meso) -->
  <Section tone="dark" pad="tight" innerClass="max-w-4xl">
    <p class="text-xs uppercase tracking-[0.2em] text-mint mb-phi-2">Tomorrow</p>
    <h2 class="text-2xl md:text-3xl font-display text-text-primary mb-phi-4">
      Receipts feed the next task.
    </h2>

    <div class="space-y-phi-2 text-lg text-text-secondary max-w-2xl">
      <p><span class="text-mint">Agent A</span> builds the API. Ships a receipt.</p>
      <p><span class="text-mint">Agent B</span> reads the receipt. Writes tests.</p>
      <p><span class="text-mint">Agent C</span> sees both. Deploys with proof.</p>
    </div>

    <p class="mt-phi-4 text-sm text-text-secondary/70">
      No context window. No re-prompting. Just receipts.
    </p>
  </Section>

  <!-- VISION 3: The Ecosystem (Macro) -->
  <Section tone="light" pad="tight" class="border-t border-line/30" innerClass="max-w-4xl">
    <p class="text-xs uppercase tracking-[0.2em] text-mint mb-phi-2">The Future</p>
    <h2 class="text-2xl md:text-3xl font-display text-text-primary mb-phi-4">
      From solo agent to orchestrated fleet.
    </h2>

    <div class="grid md:grid-cols-3 gap-phi-4 text-center">
      <div>
        <p class="text-lg font-display text-text-primary mb-phi-1">Audit</p>
        <p class="text-sm text-text-secondary">Query any action.</p>
      </div>
      <div>
        <p class="text-lg font-display text-text-primary mb-phi-1">Coordinate</p>
        <p class="text-sm text-text-secondary">No conflicts. Ever.</p>
      </div>
      <div>
        <p class="text-lg font-display text-text-primary mb-phi-1">Scale</p>
        <p class="text-sm text-text-secondary">More agents, more trust.</p>
      </div>
    </div>
  </Section>

  <!-- THE LOOP: How It Works -->
  <Section tone="dark" pad="tight" innerClass="max-w-4xl">
    <SectionHeader
      eyebrow="The Loop"
      title="Claim. Prove. Release."
      subtitle="Three steps. Full accountability."
      size="md"
      class="mb-phi-4"
    />

    <div class="grid md:grid-cols-3 gap-phi-3 text-center">
      <Panel size="sm" class="space-y-phi-2">
        <div class="text-3xl font-display text-mint">01</div>
        <p class="text-lg font-display text-text-primary">Claim</p>
        <code class="text-mint font-mono text-sm block bg-surface-muted p-phi-2 rounded-lg">
          motus work claim TASK-001
        </code>
        <p class="text-sm text-text-secondary">You own this work.</p>
      </Panel>

      <Panel size="sm" class="space-y-phi-2">
        <div class="text-3xl font-display text-mint">02</div>
        <p class="text-lg font-display text-text-primary">Prove</p>
        <code class="text-mint font-mono text-sm block bg-surface-muted p-phi-2 rounded-lg">
          motus work evidence $LEASE test
        </code>
        <p class="text-sm text-text-secondary">Proof attached.</p>
      </Panel>

      <Panel size="sm" class="space-y-phi-2">
        <div class="text-3xl font-display text-mint">03</div>
        <p class="text-lg font-display text-text-primary">Release</p>
        <code class="text-mint font-mono text-sm block bg-surface-muted p-phi-2 rounded-lg">
          motus work release $LEASE success
        </code>
        <p class="text-sm text-text-secondary">Receipt shipped.</p>
      </Panel>
    </div>
  </Section>

  <!-- TRUST -->
  <Section tone="light" pad="tight" class="text-center border-t border-line/30" innerClass="max-w-4xl">
    <h2 class="text-2xl md:text-3xl font-display text-text-primary mb-phi-3">
      Source available. Local first. Yours.
    </h2>

    <div class="flex flex-col md:flex-row gap-phi-4 justify-center items-center mb-phi-4">
      <div class="flex items-center gap-phi-1">
        <span class="text-mint">&#10003;</span>
        <span class="text-text-primary">Your receipts are your data</span>
      </div>
      <div class="flex items-center gap-phi-1">
        <span class="text-mint">&#10003;</span>
        <span class="text-text-primary">No cloud required</span>
      </div>
      <div class="flex items-center gap-phi-1">
        <span class="text-mint">&#10003;</span>
        <span class="text-text-primary">Audit everything</span>
      </div>
    </div>

    <Button href="https://pypi.org/project/motusos/" target="_blank" rel="noopener" variant="secondary" size="sm">
      View on PyPI
    </Button>
  </Section>

  <!-- FINAL CTA -->
  <Section tone="dark" pad="tight" class="text-center" innerClass="max-w-2xl">
    <h2 class="text-2xl md:text-3xl font-display text-text-primary mb-phi-2">
      Know what your agents did.
    </h2>
    <p class="text-text-secondary mb-phi-4">
      Get your first receipt in 5 minutes.
    </p>
    <InstallCommand />
  </Section>
</Layout>
