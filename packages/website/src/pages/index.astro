---
import Layout from '../layouts/Layout.astro';
import Section from '../components/Section.astro';
import Panel from '../components/Panel.astro';
import InstallCommand from '../components/InstallCommand.astro';
import SectionHeader from '../components/SectionHeader.astro';
import Button from '../components/Button.astro';
import messaging from '../data/messaging.json';

const base = import.meta.env.BASE_URL.endsWith('/')
  ? import.meta.env.BASE_URL
  : `${import.meta.env.BASE_URL}/`;

const hero = messaging.hero || {};
const heroHeadline = hero.headline || 'What did your agent actually do?';
const heroSubheadline = hero.subheadline || 'Motus knows.';
const heroValueProp = hero.value_prop || 'Every action logged. Every decision recorded. Every outcome, receipted.';
const heroCtaText = hero.cta_text || 'Get your first receipt';
const heroCtaPath = hero.cta_url ? hero.cta_url.replace(/^\/+/, '') : 'get-started';
const heroCtaHref = `${base}${heroCtaPath}`;
---

<Layout title="Motus - What did your agent actually do?">
  <!-- HERO: The Question -->
  <Section tone="dark" pad="hero" class="text-center" innerClass="max-w-4xl">
    <h1 class="text-3xl md:text-5xl lg:text-6xl font-display text-text-secondary mb-phi-3">
      {heroHeadline}
    </h1>
    <p class="text-4xl md:text-6xl lg:text-7xl font-display text-mint mb-phi-5">
      {heroSubheadline}
    </p>

    <p class="text-lg md:text-xl text-text-secondary mb-phi-4 max-w-2xl mx-auto">
      {heroValueProp}
    </p>

    <div class="flex flex-col sm:flex-row gap-phi-3 justify-center items-center mb-phi-4">
      <InstallCommand />
      <Button href={heroCtaHref} variant="secondary">
        {heroCtaText} &#8594;
      </Button>
    </div>

    <p class="text-sm text-text-secondary/60">
      Works with Claude, GPT, Gemini, LangChain, n8n, and local agents.
    </p>
  </Section>

  <!-- VISION 1: The Transaction (Micro) -->
  <Section tone="light" pad="tight" class="border-t border-line/30" innerClass="max-w-5xl">
    <SectionHeader
      eyebrow="The Transaction"
      title="One task. One receipt."
      subtitle="Every unit of work produces a receipt: what happened, proof it worked, and why decisions were made."
      size="md"
      align="left"
      maxWidth="max-w-3xl"
      class="mb-phi-4"
    />

    <div class="grid md:grid-cols-3 gap-phi-3">
      <Panel size="sm" class="space-y-phi-2">
        <p class="text-lg font-display text-mint">Outcome</p>
        <p class="text-sm text-text-secondary">What was delivered. Files created, tests passed, features shipped.</p>
        <code class="text-mint/70 font-mono text-xs block">motus work outcome $LEASE file --path src/main.py</code>
      </Panel>

      <Panel size="sm" class="space-y-phi-2">
        <p class="text-lg font-display text-mint">Evidence</p>
        <p class="text-sm text-text-secondary">Proof it worked. Test results, build logs, verification data.</p>
        <code class="text-mint/70 font-mono text-xs block">motus work evidence $LEASE test --passed 12</code>
      </Panel>

      <Panel size="sm" class="space-y-phi-2">
        <p class="text-lg font-display text-mint">Decisions</p>
        <p class="text-sm text-text-secondary">Why it was done that way. Rationale, alternatives, constraints.</p>
        <code class="text-mint/70 font-mono text-xs block">motus work decision $LEASE "Used X because Y"</code>
      </Panel>
    </div>

    <p class="mt-phi-4 text-sm text-text-secondary">
      The receipt is the deliverable. Not the code. The <em>proof</em> the code is right.
    </p>
  </Section>

  <!-- VISION 2: The Chain (Meso) -->
  <Section tone="dark" pad="tight" innerClass="max-w-5xl">
    <SectionHeader
      eyebrow="The Chain"
      title="Receipts feed the next task."
      subtitle="When one agent finishes, the next one picks up with full context. No re-explaining. No lost decisions."
      size="md"
      align="left"
      maxWidth="max-w-3xl"
      class="mb-phi-4"
    />

    <div class="grid md:grid-cols-2 gap-phi-4">
      <div class="space-y-phi-3">
        <div class="flex items-start gap-phi-2">
          <span class="text-mint text-xl">1</span>
          <div>
            <p class="text-text-primary font-display">Agent A claims work</p>
            <p class="text-sm text-text-secondary">Gets context, does the task, ships a receipt.</p>
          </div>
        </div>
        <div class="flex items-start gap-phi-2">
          <span class="text-mint text-xl">2</span>
          <div>
            <p class="text-text-primary font-display">Agent B claims dependent work</p>
            <p class="text-sm text-text-secondary">Agent A's receipt becomes Agent B's context.</p>
          </div>
        </div>
        <div class="flex items-start gap-phi-2">
          <span class="text-mint text-xl">3</span>
          <div>
            <p class="text-text-primary font-display">Chain of custody preserved</p>
            <p class="text-sm text-text-secondary">Every handoff is logged. Every decision is traceable.</p>
          </div>
        </div>
      </div>

      <Panel size="sm" class="space-y-phi-2">
        <p class="text-sm uppercase tracking-[0.2em] text-text-secondary">The Handoff</p>
        <div class="space-y-phi-1 text-sm">
          <p class="text-text-secondary"><span class="text-mint">Agent A:</span> "I built the API. Here's my receipt."</p>
          <p class="text-text-secondary"><span class="text-mint">Agent B:</span> "I see the API receipt. Writing tests now."</p>
          <p class="text-text-secondary"><span class="text-mint">Agent C:</span> "Tests passed. Deploying with full evidence."</p>
        </div>
        <p class="text-xs text-text-secondary/60 mt-phi-2">No context window. No re-prompting. Just receipts.</p>
      </Panel>
    </div>
  </Section>

  <!-- VISION 3: The Ecosystem (Macro) -->
  <Section tone="light" pad="tight" class="border-t border-line/30" innerClass="max-w-5xl">
    <SectionHeader
      eyebrow="The Ecosystem"
      title="From solo agent to orchestrated fleet."
      subtitle="One receipt is useful. A thousand receipts is an operating system for AI work."
      size="md"
      align="left"
      maxWidth="max-w-3xl"
      class="mb-phi-4"
    />

    <div class="grid md:grid-cols-3 gap-phi-3">
      <Panel size="sm" class="space-y-phi-2">
        <p class="text-lg font-display text-text-primary">Audit Everything</p>
        <p class="text-sm text-text-secondary">Every agent action is logged to an immutable audit trail. Query what happened, when, and why.</p>
      </Panel>

      <Panel size="sm" class="space-y-phi-2">
        <p class="text-lg font-display text-text-primary">Coordinate Safely</p>
        <p class="text-sm text-text-secondary">Lease-based coordination prevents conflicts. Agents can't overwrite each other's work.</p>
      </Panel>

      <Panel size="sm" class="space-y-phi-2">
        <p class="text-lg font-display text-text-primary">Scale With Proof</p>
        <p class="text-sm text-text-secondary">More agents, more receipts, more trust. The system gets more accountable as it grows.</p>
      </Panel>
    </div>

    <p class="mt-phi-4 text-sm text-text-secondary">
      Today: Know what one agent did. Tomorrow: Orchestrate a fleet with full accountability.
    </p>
  </Section>

  <!-- THE LOOP: How It Works -->
  <Section tone="dark" pad="tight" innerClass="max-w-4xl">
    <SectionHeader
      eyebrow="The Loop"
      title="Claim. Prove. Release."
      subtitle="Three steps. Full accountability."
      size="md"
      class="mb-phi-4"
    />

    <div class="grid md:grid-cols-3 gap-phi-3 text-center">
      <Panel size="sm" class="space-y-phi-2">
        <div class="text-3xl font-display text-mint">01</div>
        <p class="text-lg font-display text-text-primary">Claim</p>
        <code class="text-mint font-mono text-sm block bg-surface-muted p-phi-2 rounded-lg">
          motus work claim TASK-001
        </code>
        <p class="text-sm text-text-secondary">You own this work.</p>
      </Panel>

      <Panel size="sm" class="space-y-phi-2">
        <div class="text-3xl font-display text-mint">02</div>
        <p class="text-lg font-display text-text-primary">Prove</p>
        <code class="text-mint font-mono text-sm block bg-surface-muted p-phi-2 rounded-lg">
          motus work evidence $LEASE test
        </code>
        <p class="text-sm text-text-secondary">Proof attached.</p>
      </Panel>

      <Panel size="sm" class="space-y-phi-2">
        <div class="text-3xl font-display text-mint">03</div>
        <p class="text-lg font-display text-text-primary">Release</p>
        <code class="text-mint font-mono text-sm block bg-surface-muted p-phi-2 rounded-lg">
          motus work release $LEASE success
        </code>
        <p class="text-sm text-text-secondary">Receipt shipped.</p>
      </Panel>
    </div>
  </Section>

  <!-- TRUST -->
  <Section tone="light" pad="tight" class="text-center border-t border-line/30" innerClass="max-w-4xl">
    <h2 class="text-2xl md:text-3xl font-display text-text-primary mb-phi-3">
      Source available. Local first. Yours.
    </h2>

    <div class="flex flex-col md:flex-row gap-phi-4 justify-center items-center mb-phi-4">
      <div class="flex items-center gap-phi-1">
        <span class="text-mint">&#10003;</span>
        <span class="text-text-primary">Your receipts are your data</span>
      </div>
      <div class="flex items-center gap-phi-1">
        <span class="text-mint">&#10003;</span>
        <span class="text-text-primary">No cloud required</span>
      </div>
      <div class="flex items-center gap-phi-1">
        <span class="text-mint">&#10003;</span>
        <span class="text-text-primary">Audit everything</span>
      </div>
    </div>

    <Button href="https://pypi.org/project/motusos/" target="_blank" rel="noopener" variant="secondary" size="sm">
      View on PyPI
    </Button>
  </Section>

  <!-- FINAL CTA -->
  <Section tone="dark" pad="tight" class="text-center" innerClass="max-w-2xl">
    <h2 class="text-2xl md:text-3xl font-display text-text-primary mb-phi-2">
      Know what your agents did.
    </h2>
    <p class="text-text-secondary mb-phi-4">
      Get your first receipt in 5 minutes.
    </p>
    <InstallCommand />
  </Section>
</Layout>
